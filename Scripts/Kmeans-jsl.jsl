Cols = {:Name( "HomeValue2000" ), :Name( "Income1999" ), :Name( "PopDensity2000" ), :Name( "PopChange" ), :Name( "Prcnt65+" ),:Name( "Below18" ), :Name( "PrcntFemale2000" ), :Name( "PrcntHSgrads2000" ), :Name( "PrcntCollege2000" ), :Name( "Unemployed" ),:Name( "PrcntBelow18" ), :Name( "LifeExpectancy" ), :Name( "FarmAcres" )};cnt = N Items( Cols );results = New Table( "results" );dt1 = Open(	"/Users/pczrr/Downloads/6-00sc-spring-2011/6-00sc-spring-2011/contents/unit-3/lecture-22-using-graphs-to-model-problems-part-2/ps10/counties_training.jmp");dt2 = Open(	"/Users/pczrr/Downloads/6-00sc-spring-2011/6-00sc-spring-2011/contents/unit-3/lecture-22-using-graphs-to-model-problems-part-2/ps10/counties_validation.jmp");Current Data Table( dt1 );For( i = 25, i <= 150, i++,	clusters = K Means Cluster(		Y(			:HomeValue2000,			:Income1999,			:PopDensity2000,			:PopChange,			:Name( "Prcnt65+" ),			:Below18,			:PrcntFemale2000,			:PrcntHSgrads2000,			:PrcntCollege2000,			:Unemployed,			:PrcntBelow18,			:LifeExpectancy,			:FarmAcres		),		invisible,		{Number of Clusters( i ), Name( "K-Means Clustering" ), Go},		SendToReport( Dispatch( {}, "Control Panel", OutlineBox, {Close( 1 )} ) )	);	clusters << Save Cluster Formula;	ClustMeansList = {};	For( h = 1, h <= i, h++,		list0 = {};		For( j = 1, j <= cnt, j++,			Col = Cols[j];			list0[j] = Col Mean( Col, :Name( "Cluster Formula" ) == h ) / Col Max( Col );		);		ClustMeansList[h] = list0;	);	Print( i );	Print( ClustMeansList );	dt3 = dt1 << Concatenate( dt2, Keep Formulas );	dt3 << New Column( "SSE", Numeric, Continuous, Format( "Best", 12 ) );	Current Data Table( dt3 );	For Each Row(		Cluster = :Name( "Cluster Formula" )[];//		Print(Cluster);		ClustMeans = ClustMeansList[Cluster];		list1 = {};		For( j = 1, j <= cnt, j++,			Col = Cols[j];			list1[j] = ((Col[] / Col Max( Col )) - ClustMeans[j]) ^ 2;		);//		Print(RowNormMean);		:SSE[] = Sum( list1 );	);	k_summary = dt3 << Summary( Group( :Cluster Formula ), Mean( :SSE ), Subgroup( :Vflag ) );	k_summary << New Column( "ValDiff",		Numeric,		Continuous,		Format( "Best", 12 ),		Formula( :Name( "Mean(SSE, 1)" ) - :Name( "Mean(SSE, 0)" ) )	);	k_summary << New Column( "num clusters",		Numeric,		Continuous		Format( "Best", 12 ),		Formula( i )		);//k_summary << Summary( Group( :num clusters ), Mean( :diff squared ), Std Dev( :diff squared ) );	results << Concatenate( k_summary, Append to first table );	dt1 << Delete Columns( "Cluster Formula" );//Close( result );	Close( k_summary, No Save );	Close( dt3, No Save );	Current Data Table( dt1 ););